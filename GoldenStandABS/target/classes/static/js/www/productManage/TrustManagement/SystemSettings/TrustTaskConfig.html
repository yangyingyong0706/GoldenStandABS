<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <meta name="renderer" content="webkit" />
    <title>任务设置编辑</title>
    <link rel="stylesheet" href="../TrustFollowUp/css/trustFollowUp.css" />

    <link href="../../../../asset/lib/jquery/jquery-ui.css" rel="stylesheet" />
    <script src="../../../../asset/lib/jquery/jquery-1.7.2.min.js"></script>

    <script src="../../../../config/globalVariable.js"></script>

    <script src="../../../../asset/lib/jquery/jquery-ui-latest.js"></script>

    <script src="../Common/Scripts/common.js"></script>
    <script src="../Common/Scripts/calendar.min.js"></script>
    <script src="../wcfProxy.js"></script>
    <script type="text/javascript">
        var id = getQueryString("id") ? getQueryString("id") : "0";

        var sContent = {
            'SPName': 'usp_GetTrustTaskConfigForEdit', 'SQLParams': [
            { 'Name': 'id', 'Value': id, 'DBType': 'int' }
            ]
        };
        var getDataConfig = sContent;
        var getUpdateParams = function (ps) {
            return {
                'SPName': 'usp_UpdateTrustTaskConfigForEdit', 'SQLParams': [
                    { 'Name': 'items', 'Value': ps, 'DBType': 'xml' }
                ]
            };
        }
        var SaveCallBack = function () {
            if (window.parent.searchByWhere)
                window.parent.searchByWhere();

            if (id == "0") {
                window.parent.location.reload();
                //var tmpInterval = setInterval(function () {
                //    if (1 == 1) {
                //        $(window.parent.document).find("#modal-mask").css("z-index","-1").remove();
                //        $(window.parent.document).find("#modal-layout").css("z-index", "-1").remove();
                //        window.clearInterval(tmpInterval);
                //    }
                //}, 10);
            }
            else
                alert("操作成功");
        }

    </script>
</head>
<body>
    <div id="loading" class="loadpage">
        <i class="icon icon-setting bigicon am-rotate pa"></i>
        <i class="icon icon-setting smicon am-rotate pa"></i>
        <p class="text pa">加载配置中...</p>
    </div>
    <div class="page">
        <div class="main">
            <div class="menu-buttons xs-hidden">
                <span class="tab-columns">
                    <button type="button" class="btn btn-active" data-col="2">
                        <span class="bs bs2"></span>
                        <span class="bs bs2"></span>
                    </button>
                    <button type="button" class="btn" data-col="3">
                        <span class="bs bs1"></span>
                        <span class="bs bs1"></span>
                        <span class="bs bs1"></span>
                    </button>
                </span>
            </div>
            <h3 id="step-title" class="h3"><span class="title">任务设置</span></h3>
            
            <div class="menu_target" style="padding:15px 10px 5px 15px;">
                
                <div class="form">
                    <!-- 任务设置 -->
                    <div id="TrustExtensionDiv" class="form-body" id="step0">
                        <div class="form-menu">
                            <div class="form-panel item">
                                <div class="col-12" data-bind="foreach:DateSetList.BasicData">
                                    <!-- ko if : IsDisplay()=='1' -->
                                    <div class="col-6 form-group autoLayout-plugins">
                                        <div class="col-4">
                                            <label data-bind="html:ItemAliasValue"></label>
                                        </div>
                                        <div class="col-6">
                                            <div class="col-11" data-bind="renderControl:ItemValue">
                                            </div>
                                        </div>
                                    </div>
                                    <!-- /ko -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-button">
                    <button id="next-step" type="button" class="btn btn-primary btn-next">确定</button>
                </div>
            </div>
        </div>
    </div>

    <script src="../../../../asset/lib/knockout/knockout-3.4.0.js"></script>
    <script src="../../../../asset/lib/knockout/knockout.mapping-latest.js"></script>
    <script src="../../../../asset/lib/knockout/knockout.binding.rendercontrol.js"></script>
    <script src="./viewFllowUpPageMain.js"></script>
    <script src="./viewFllowUpPageData.js"></script>
    <script type="text/javascript">
        TrustFllowUp.init();
    </script>
</body>
</html>
